/* Sidebar */
.sidebar {
  border-right: 1px solid #cfcfcf;
  padding: 14px 14px 18px;
  overflow: visible;
  position: relative;
  z-index: 20;
}

.sidebar-title {
  margin: 2px 0 12px;
  font-size: 20px;
  font-weight: 700;
}

.form {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

/* ===== Help icon przy labelach ===== */
.label--withHelp {
  display: flex;
  align-items: center;
  gap: 8px;
}

/* kółko z ? */
.helpIcon {
  position: relative;
  width: 18px;
  height: 18px;
  border-radius: 50%;

  display: inline-flex;
  align-items: center;
  justify-content: center;

  font-size: 12px;
  font-weight: 900;
  cursor: help;

  background: rgba(0,0,0,0.08);
  color: #222;

  transition: background 120ms ease;
}

.helpIcon:hover {
  background: rgba(0,0,0,0.15);
}

/* tooltip */
.helpTooltip {
  position: absolute;
  left: calc(100% + 10px);
  top: 50%;
  transform: translateY(-50%);

  min-width: 240px;
  max-width: 280px;

  padding: 12px 14px;
  border-radius: 10px;

  background: #1e1e1e;
  color: #fff;

  font-size: 12.5px;
  line-height: 1.45;

  box-shadow:
    0 6px 16px rgba(0,0,0,0.25);

  opacity: 0;
  pointer-events: none;
  z-index: 9999;

  transition: opacity 120ms ease, transform 120ms ease;
}

/* strzałka */
.helpTooltip::before {
  content: "";
  position: absolute;
  left: -6px;
  top: 50%;
  transform: translateY(-50%);

  border-width: 6px 6px 6px 0;
  border-style: solid;
  border-color: transparent #1e1e1e transparent transparent;
}


/* pokazuj tooltip */
.helpIcon:hover .helpTooltip,
.helpIcon:focus .helpTooltip {
  opacity: 1;
  transform: translateY(-50%) translateX(2px);
}


/* ===== Dark mode ===== */
#MainApp.theme-dark .helpIcon {
  background: rgba(255,255,255,0.14);
  color: #fff;
}

#MainApp.theme-dark .helpIcon:hover {
  background: rgba(255,255,255,0.22);
}

#MainApp.theme-dark .helpTooltip {
  background: #0f1115;
}

#MainApp.theme-dark .helpTooltip::before {
  border-color: transparent #0f1115 transparent transparent;
}

.field .label {
  font-size: 14px;
  margin-bottom: 4px;
  font-weight: 700;
  color: #333;
}

.input {
  width: 95%;
  height: 32px;
  border: 1px solid #bdbdbd;
  padding: 0 10px;
  outline: none;
}

.textarea {
  width: 95%;
  height: 250px;
  border: 1px solid #bdbdbd;
  padding: 8px 10px;
  resize: none;
  outline: none;
}

.colors {
  display: flex;
  gap: 20px;
  flex-wrap: wrap;
  padding: 6px 0 10px 4px;
}

.colorsModal {
  display: flex;
  gap: 25px;
  flex-wrap: wrap;
  padding: 6px 0 10px 4px;
}

.colorDot {
  width: 28px;
  height: 28px;
  border-radius: 10px;
  border: 1px solid rgba(0,0,0,0.18);

  cursor: pointer;
  position: relative;

  transition:
    transform 140ms ease,
    box-shadow 140ms ease;
}

.colorDot:hover {
  transform: translateY(-1px);
  box-shadow: 0 6px 14px rgba(0,0,0,0.12);
}

.colorDot.active {
  border-color: rgba(0,0,0,0.35);
  box-shadow:
    0 0 0 3px rgba(0,0,0,0.18),
    0 8px 18px rgba(0,0,0,0.14);
}

.colorDot.active::after {
  content: "✓";
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;

  font-size: 14px;
  font-weight: 900;
  color: rgba(0,0,0,0.65);
}

.addBtn {
  height: 36px;
  border: 1px solid #a8502f;
  background: #d96a3a;
  color: #fff;
  font-weight: 700;
  cursor: pointer;
}

.addBtn.btnSlide {
  --hover-bg: #b9542c;
  --hover-color: #fff;
}

.tagHints {
  margin-top: 8px;
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

.tagHint {
  border: none;
  background: #2f2f2f;
  color: #fff;
  font-size: 12px;
  padding: 4px 8px;
  cursor: pointer;
}

.tagRow {
  margin-top: 8px;
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

.tagChip {
  border: none;
  background: #2f2f2f;
  color: #fff;
  font-size: 12px;
  padding: 4px 8px;
  cursor: pointer;
}

.tagChip .x {
  margin-left: 6px;
  opacity: 0.9;
}

/* input + plus obok */
.tagInputRow {
  display: flex;
  align-items: center;
  gap: 10px;
}

.tagPlusBtn {
  width: 36px;
  height: 32px;
  border: 1px solid #bdbdbd;
  background: #fff;
  font-weight: 900;
  font-size: 18px;
  line-height: 1;
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

/* modal tagów */
.modal--tag {
  width: min(720px, 92vw);
  max-height: 82vh;
  overflow: auto;
  position: relative;
}

.tagModalTop {
  margin-top: 10px;
}

.tagModalLabel {
  font-size: 13px;
  font-weight: 800;
  color: #333;
  margin-bottom: 8px;
}

.tagModalInputRow {
  display: flex;
  gap: 10px;
  align-items: center;
}

.tagModalAddBtn {
  height: 32px;
  padding: 0 14px;
  border: 1px solid #333;
  background: #2f2f2f;
  color: #fff;
  cursor: pointer;
  font-weight: 800;
}

.tagModalEmpty {
  font-size: 13px;
  color: #555;
  margin-top: 6px;
}

/* DARK THEME (jeśli używasz) */
#MainApp.theme-dark .tagPlusBtn {
  background: #0f1115;
  border-color: rgba(255,255,255,0.16);
  color: #fff;
}

#MainApp.theme-dark .modal--tag {
  background: #151826;
  color: #fff;
  border-color: rgba(255,255,255,0.14);
}

#MainApp.theme-dark .tagModalLabel {
  color: rgba(255,255,255,0.82);
}

#MainApp.theme-dark .tagModalAddBtn {
  background: #ffffff;
  color: #151826;
  border-color: rgba(255,255,255,0.25);
}


/* ===== Sidebar: label + licznik ===== */
.labelRow {
  display: flex;
  align-items: baseline;
  justify-content: space-between;
  gap: 10px;
}

.charCount {
  font-size: 12px;
  font-weight: 800;
  opacity: 0.65;
}

/* ===== Sidebar: error message ===== */
.formError {
  margin-top: 6px;
  margin-bottom: 10px;
  padding: 10px 12px;

  border-radius: 10px;
  border: 1px solid rgba(176, 0, 0, 0.35);
  background: rgba(176, 0, 0, 0.12);

  color: #b00000;
  font-weight: 800;
  font-size: 13px;
}

/* w dark mode też ma być czytelne */
#MainApp.theme-dark .formError {
  color: #ff7a7a;
  border-color: rgba(255, 122, 122, 0.35);
  background: rgba(255, 122, 122, 0.12);
}


@media (min-width: 1920px) {
  .sidebar {
    padding: 18px 18px 22px;
  }

  .sidebar-title {
    font-size: 24px;
  }

  .input {
    height: 38px;
    font-size: 14.5px;
  }

  .textarea {
    height: 320px;
    font-size: 14.5px;
  }

  .colorDot {
    width: 34px;
    height: 34px;
    border-radius: 12px;
  }

  .addBtn {
    height: 44px;
    font-size: 15px;
  }
}

@media (min-width: 2560px) {
  .sidebar-title {
    font-size: 26px;
  }

  .input {
    height: 42px;
    font-size: 15.5px;
  }

  .textarea {
    height: 360px;
    font-size: 15.5px;
  }

  .colorDot {
    width: 38px;
    height: 38px;
    border-radius: 14px;
  }
}

/* ===== SMART TEXTAREA ===== */
.smartTA{
  position: relative;
  width: 95%;
  height: 360px;
  border: 1px solid #bdbdbd;
  background: #fff;
  box-sizing: border-box;
  overflow: hidden; /* ✅ żeby nic nie robiło 2. scrolla */
}

/* ✅ WSPÓLNA BAZA 1:1 dla input + preview (KLUCZ) */
.smartTA__input,
.smartTA__preview{
  font-family: inherit;
  font-size: 14px;
  line-height: 1.45;
  letter-spacing: 0;
  tab-size: 2;

  padding: 10px 12px;
  box-sizing: border-box;

  white-space: pre-wrap;
  word-break: break-word;
}

/* preview (kolorowany tekst) */
.smartTA__preview{
  position: absolute;
  inset: 0;
  z-index: 1;

  pointer-events: none;

  /* ✅ preview NIE scrolluje (tylko textarea scrolluje) */
  overflow: hidden;

  width: 100%;
  height: 100%;

  /* ✅ preview ma normalny kolor tekstu */
  color: #111;
}

/* ✅ ważne: pre/code też muszą być “płaskie” i bez własnego scrolla */
.smartTA__preview pre,
.smartTA__preview code{
  margin: 0;
  padding: 0;

  /* ✅ żadnych własnych scrollerów */
  overflow: visible;

  /* ✅ to samo zawijanie co textarea */
  white-space: inherit;
  word-break: inherit;

  max-width: 100%;
  display: block;
}

/* textarea (kursor + input) */
.smartTA__input{
  position: relative;
  z-index: 2;

  width: 100%;
  height: 100%;

  /* ✅ KLUCZ: przebij globalne .textarea */
  background: transparent !important;
  border: 0 !important;
  outline: none !important;
  box-shadow: none !important;

  resize: none;

  /* ✅ scroll TYLKO TU */
  overflow: auto;

  /* ✅ ukrywamy tekst, zostaje caret */
  color: transparent;
  caret-color: #111;

  pointer-events: auto;
}

/* placeholder */
.smartTA__input::placeholder{
  color: rgba(0,0,0,0.45);
}

/* ✅ code mode: identycznie dla obu */
.smartTA--code .smartTA__input,
.smartTA--code .smartTA__preview{
  font-family: "Fira Code", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
  font-size: 13px;
  line-height: 1.45; /* ✅ zostaw to samo, żeby nie rozjechać kursora */
}

/* dark */
#MainApp.theme-dark .smartTA{
  background: #0f1115;
  border-color: rgba(255,255,255,0.16);
}

#MainApp.theme-dark .smartTA__input{
  caret-color: #fff;
}

#MainApp.theme-dark .smartTA__preview{
  color: #e9e9ee; /* ✅ tekst widoczny w dark mode */
}

#MainApp.theme-dark .smartTA__input::placeholder{
  color: rgba(255,255,255,0.5);
}

/* ===== MOBILE SHEET: SidebarForm ma działać jak normalny formularz ===== */

/* Sam sheet powinien scrollować, nie sidebar */
.sheet {
  max-height: 92vh;
  overflow: auto;
  -webkit-overflow-scrolling: touch;
}

/* SidebarForm w sheet'cie NIE ma być "sidebar-em" */
.sheet .sidebar{
  width: 100%;
  height: auto !important;
  max-height: none !important;
  position: static !important;
  overflow: visible !important;

  background: transparent;
  border-right: 0;
  box-shadow: none;
  padding: 0;            /* sheet ma swój padding */
  margin: 0;
}

/* Ukryj tytuł sidebara, bo sheet ma własny nagłówek */
.sheet .sidebar-title{
  display: none;
}

/* Daj oddech formularzowi w środku sheet'a */
.sheet .form{
  padding: 14px 14px 18px;
}

/* Pole textarea w sheet (żeby było używalne) */
.sheet .textarea{
  min-height: 180px;
}

/* Tag hints i dropdowny niech nie wychodzą poza sheet */
.sheet .tagHints{
  position: relative;
  z-index: 5;
}

/* Kolory i przycisk "Dodaj" niech będą pełnej szerokości */
.sheet .addBtn{
  width: 100%;
}

/* ===== FIX: SIDEBAR W SHEET NA MOBILE ===== */
@media (max-width: 760px) {
  /* w sheet chcemy pełną szerokość pól */
  .sheet .input,
  .sheet .textarea,
  .sheet .smartTA {
    width: 100% !important;
  }

  /* zmniejszamy wysokość edytora, żeby nie wyglądało jak „pusto” */
  .sheet .textarea {
    height: 180px !important;
  }

  .sheet .smartTA {
    height: 220px !important;
  }

  /* dropdown podpowiedzi tagów nad resztą */
  .sheet .tagHints {
    z-index: 50;
  }

  /* daj trochę miejsca na dole, żeby przycisk nie był przyklejony */
  .sheet .form {
    padding-bottom: 26px;
  }
}

